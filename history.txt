#V2
BEGIN TRANSACTION;\n\nDEFINE TABLE user SCHEMAFULL;\nDEFINE TABLE warehouse SCHEMAFULL;\nDEFINE TABLE manages SCHEMAFULL;\nDEFINE TABLE fields SCHEMALESS;\nDEFINE TABLE entities SCHEMAFULL;\nDEFINE TABLE categories SCHEMAFULL;\n\nDEFINE FIELD email ON TABLE user TYPE string\n  ASSERT $value != NULL AND $value != NONE AND is::email($value);\nDEFINE FIELD firstName ON TABLE user TYPE string\n  ASSERT $value != NULL AND $value != NONE AND string::len($value) > 0 AND is::alpha($value);\nDEFINE FIELD lastName ON TABLE user TYPE string\n  ASSERT $value != NULL AND $value != NONE AND string::len($value) > 0 AND is::alpha($value);\nDEFINE FIELD passwd ON TABLE user TYPE string\n  ASSERT $value != NULL AND $value != NONE AND string::len($value) > 0;\nDEFINE FIELD avatar ON TABLE user TYPE string\n  VALUE $value OR NULL\n  ASSERT (is::url($value) OR $value == NULL);\nDEFINE FIELD owns ON TABLE user TYPE array\n  VALUE $value OR []\n  ASSERT array::distinct($value) == $value OR $value == NULL;\nDEFINE FIELD owns.* ON TABLE user TYPE record(warehouse);\n\nDEFINE INDEX userEmailIndex ON TABLE user COLUMNS email UNIQUE;\n\nDEFINE FIELD name ON TABLE warehouse TYPE string\n  ASSERT $value != NULL AND $value != NONE AND string::len($value) > 0;\nDEFINE FIELD desc ON TABLE warehouse TYPE string\n  ASSERT $value != NULL AND $value != NONE AND string::len($value) > 0;\nDEFINE FIELD logo ON TABLE warehouse TYPE string\n  VALUE $value OR NULL\n  ASSERT (is::url($value) OR $value == NULL);\nDEFINE FIELD owner ON TABLE warehouse TYPE record(user)\n  ASSERT $value != NULL AND $value != NONE;\nDEFINE FIELD isPhysical ON TABLE warehouse TYPE bool\n  VALUE $value OR false;\nDEFINE FIELD capacity ON TABLE warehouse TYPE int\n  VALUE $value OR 0;\n\nDEFINE INDEX name_owner_pairs ON TABLE warehouse COLUMNS name,owner UNIQUE;\n\nDEFINE FIELD title ON TABLE categories TYPE object\n  ASSERT $value != NULL AND $value != NONE;\nDEFINE FIELD title.pl ON TABLE categories type string\n  ASSERT $value != NULL AND $value != NONE;\nDEFINE FIELD title.en ON TABLE categories type string\n  ASSERT $value != NULL AND $value != NONE;\nDEFINE FIELD description ON TABLE categories TYPE object\n  ASSERT $value != NULL AND $value != NONE;\nDEFINE FIELD description.pl ON TABLE categories type string\n  ASSERT $value != NULL AND $value != NONE;\nDEFINE FIELD description.en ON TABLE categories type string\n  ASSERT $value != NULL AND $value != NONE;\nDEFINE FIELD properties ON TABLE categories type array\n  ASSERT $value != NULL AND $value != NONE;\nDEFINE FIELD properties.* ON TABLE categories type record(fields);\nDEFINE FIELD parents ON TABLE categories type array;\nDEFINE FIELD parents.* ON TABLE categories type record(categories);\n\nDEFINE FIELD in ON TABLE manages TYPE record(user);\nDEFINE FIELD out ON TABLE manages TYPE record(warehouse);\nDEFINE FIELD roles ON TABLE manages TYPE array\n  ASSERT $value != NULL AND $value != NONE AND array::distinct($value) == $value;\nDEFINE FIELD roles.* ON TABLE manages TYPE string;\n\nDEFINE INDEX unique_relationships ON TABLE manages COLUMNS in, out UNIQUE;\n\nDEFINE FIELD data ON TABLE entities type object\n  ASSERT $value != NULL AND $value != NONE;\nDEFINE FIELD meta ON TABLE entities type object;\n  ASSERT $value != NULL AND $value != NONE;\nDEFINE FIELD meta.status ON TABLE entities type string;\nDEFINE FIELD meta.release ON TABLE entities type datetime;\nDEFINE FIELD meta.discount ON TABLE entities type number;\nDEFINE FIELD meta.discount_deadline ON TABLE entities type datetime;\n\n\nCOMMIT TRANSACTION;
BEGIN TRANSACTION;\n\nDEFINE TABLE user SCHEMAFULL;\nDEFINE TABLE warehouse SCHEMAFULL;\nDEFINE TABLE manages SCHEMAFULL;\nDEFINE TABLE fields SCHEMALESS;\nDEFINE TABLE entities SCHEMAFULL;\nDEFINE TABLE categories SCHEMAFULL;\n\nDEFINE FIELD email ON TABLE user TYPE string\n  ASSERT $value != NULL AND $value != NONE AND is::email($value);\nDEFINE FIELD firstName ON TABLE user TYPE string\n  ASSERT $value != NULL AND $value != NONE AND string::len($value) > 0 AND is::alpha($value);\nDEFINE FIELD lastName ON TABLE user TYPE string\n  ASSERT $value != NULL AND $value != NONE AND string::len($value) > 0 AND is::alpha($value);\nDEFINE FIELD passwd ON TABLE user TYPE string\n  ASSERT $value != NULL AND $value != NONE AND string::len($value) > 0;\nDEFINE FIELD avatar ON TABLE user TYPE string\n  VALUE $value OR NULL\n  ASSERT (is::url($value) OR $value == NULL);\nDEFINE FIELD owns ON TABLE user TYPE array\n  VALUE $value OR []\n  ASSERT array::distinct($value) == $value OR $value == NULL;\nDEFINE FIELD owns.* ON TABLE user TYPE record(warehouse);\n\nDEFINE INDEX userEmailIndex ON TABLE user COLUMNS email UNIQUE;\n\nDEFINE FIELD name ON TABLE warehouse TYPE string\n  ASSERT $value != NULL AND $value != NONE AND string::len($value) > 0;\nDEFINE FIELD desc ON TABLE warehouse TYPE string\n  ASSERT $value != NULL AND $value != NONE AND string::len($value) > 0;\nDEFINE FIELD logo ON TABLE warehouse TYPE string\n  VALUE $value OR NULL\n  ASSERT (is::url($value) OR $value == NULL);\nDEFINE FIELD owner ON TABLE warehouse TYPE record(user)\n  ASSERT $value != NULL AND $value != NONE;\nDEFINE FIELD isPhysical ON TABLE warehouse TYPE bool\n  VALUE $value OR false;\nDEFINE FIELD capacity ON TABLE warehouse TYPE int\n  VALUE $value OR 0;\n\nDEFINE INDEX name_owner_pairs ON TABLE warehouse COLUMNS name,owner UNIQUE;\n\nDEFINE FIELD title ON TABLE categories TYPE object\n  ASSERT $value != NULL AND $value != NONE;\nDEFINE FIELD title.pl ON TABLE categories type string\n  ASSERT $value != NULL AND $value != NONE;\nDEFINE FIELD title.en ON TABLE categories type string\n  ASSERT $value != NULL AND $value != NONE;\nDEFINE FIELD description ON TABLE categories TYPE object\n  ASSERT $value != NULL AND $value != NONE;\nDEFINE FIELD description.pl ON TABLE categories type string\n  ASSERT $value != NULL AND $value != NONE;\nDEFINE FIELD description.en ON TABLE categories type string\n  ASSERT $value != NULL AND $value != NONE;\nDEFINE FIELD properties ON TABLE categories type array\n  ASSERT $value != NULL AND $value != NONE;\nDEFINE FIELD properties.* ON TABLE categories type record(fields);\nDEFINE FIELD parents ON TABLE categories type array;\nDEFINE FIELD parents.* ON TABLE categories type record(categories);\n\nDEFINE FIELD in ON TABLE manages TYPE record(user);\nDEFINE FIELD out ON TABLE manages TYPE record(warehouse);\nDEFINE FIELD roles ON TABLE manages TYPE array\n  ASSERT $value != NULL AND $value != NONE AND array::distinct($value) == $value;\nDEFINE FIELD roles.* ON TABLE manages TYPE string;\n\nDEFINE INDEX unique_relationships ON TABLE manages COLUMNS in, out UNIQUE;\n\nDEFINE FIELD data ON TABLE entities type object\n  ASSERT $value != NULL AND $value != NONE;\nDEFINE FIELD meta ON TABLE entities type object\n  ASSERT $value != NULL AND $value != NONE;\nDEFINE FIELD meta.status ON TABLE entities type string;\nDEFINE FIELD meta.release ON TABLE entities type datetime;\nDEFINE FIELD meta.discount ON TABLE entities type number;\nDEFINE FIELD meta.discount_deadline ON TABLE entities type datetime;\n\n\nCOMMIT TRANSACTION;
SELECT * FROM warehouse;
SELECT * FROM user;
SELECT * FROM warehouse;
BEGIN TRANSACTION;\n\nDEFINE TABLE user SCHEMAFULL;\nDEFINE TABLE warehouse SCHEMAFULL;\nDEFINE TABLE manages SCHEMAFULL;\nDEFINE TABLE fields SCHEMALESS;\nDEFINE TABLE entities SCHEMAFULL;\nDEFINE TABLE categories SCHEMAFULL;\n\nDEFINE FIELD email ON TABLE user TYPE string\n  ASSERT $value != NULL AND $value != NONE AND is::email($value);\nDEFINE FIELD firstName ON TABLE user TYPE string\n  ASSERT $value != NULL AND $value != NONE AND string::len($value) > 0 AND is::alpha($value);\nDEFINE FIELD lastName ON TABLE user TYPE string\n  ASSERT $value != NULL AND $value != NONE AND string::len($value) > 0 AND is::alpha($value);\nDEFINE FIELD passwd ON TABLE user TYPE string\n  ASSERT $value != NULL AND $value != NONE AND string::len($value) > 0;\nDEFINE FIELD avatar ON TABLE user TYPE string\n  VALUE $value OR NULL\n  ASSERT (is::url($value) OR $value == NULL);\nDEFINE FIELD owns ON TABLE user TYPE array\n  VALUE $value OR []\n  ASSERT array::distinct($value) == $value OR $value == NULL;\nDEFINE FIELD owns.* ON TABLE user TYPE record(warehouse);\n\nDEFINE INDEX userEmailIndex ON TABLE user COLUMNS email UNIQUE;\n\nDEFINE FIELD name ON TABLE warehouse TYPE string\n  ASSERT $value != NULL AND $value != NONE AND string::len($value) > 0;\nDEFINE FIELD desc ON TABLE warehouse TYPE string\n  ASSERT $value != NULL AND $value != NONE AND string::len($value) > 0;\nDEFINE FIELD logo ON TABLE warehouse TYPE string\n  VALUE $value OR NULL\n  ASSERT (is::url($value) OR $value == NULL);\nDEFINE FIELD owner ON TABLE warehouse TYPE record(user)\n  ASSERT $value != NULL AND $value != NONE;\nDEFINE FIELD isPhysical ON TABLE warehouse TYPE bool\n  VALUE $value OR false;\nDEFINE FIELD capacity ON TABLE warehouse TYPE int\n  VALUE $value OR 0;\n\nDEFINE INDEX name_owner_pairs ON TABLE warehouse COLUMNS name,owner UNIQUE;\n\nDEFINE FIELD title ON TABLE categories TYPE object\n  ASSERT $value != NULL AND $value != NONE;\nDEFINE FIELD title.pl ON TABLE categories type string\n  ASSERT $value != NULL AND $value != NONE;\nDEFINE FIELD title.en ON TABLE categories type string\n  ASSERT $value != NULL AND $value != NONE;\nDEFINE FIELD description ON TABLE categories TYPE object\n  ASSERT $value != NULL AND $value != NONE;\nDEFINE FIELD description.pl ON TABLE categories type string\n  ASSERT $value != NULL AND $value != NONE;\nDEFINE FIELD description.en ON TABLE categories type string\n  ASSERT $value != NULL AND $value != NONE;\nDEFINE FIELD properties ON TABLE categories type array\n  ASSERT $value != NULL AND $value != NONE;\nDEFINE FIELD properties.* ON TABLE categories type record(fields);\nDEFINE FIELD parents ON TABLE categories type array;\nDEFINE FIELD parents.* ON TABLE categories type record(categories);\n\nDEFINE FIELD in ON TABLE manages TYPE record(user);\nDEFINE FIELD out ON TABLE manages TYPE record(warehouse);\nDEFINE FIELD roles ON TABLE manages TYPE array\n  ASSERT $value != NULL AND $value != NONE AND array::distinct($value) == $value;\nDEFINE FIELD roles.* ON TABLE manages TYPE string;\n\nDEFINE INDEX unique_relationships ON TABLE manages COLUMNS in, out UNIQUE;\n\nDEFINE FIELD data ON TABLE entities type object\n  ASSERT $value != NULL AND $value != NONE;\nDEFINE FIELD meta ON TABLE entities type object\n  ASSERT $value != NULL AND $value != NONE;\nDEFINE FIELD meta.status ON TABLE entities type string;\nDEFINE FIELD meta.release ON TABLE entities type datetime;\nDEFINE FIELD meta.discount ON TABLE entities type number;\nDEFINE FIELD meta.discount_deadline ON TABLE entities type datetime;\n\n\nCOMMIT TRANSACTION;
select * from user;
BEGIN TRANSACTION;\n\nDEFINE TABLE user SCHEMAFULL;\nDEFINE TABLE warehouse SCHEMAFULL;\nDEFINE TABLE manages SCHEMAFULL;\nDEFINE TABLE fields SCHEMALESS;\nDEFINE TABLE entities SCHEMAFULL;\nDEFINE TABLE categories SCHEMAFULL;\n\nDEFINE FIELD email ON TABLE user TYPE string\n  ASSERT $value != NULL AND $value != NONE AND is::email($value);\nDEFINE FIELD firstName ON TABLE user TYPE string\n  ASSERT $value != NULL AND $value != NONE AND string::len($value) > 0 AND is::alpha($value);\nDEFINE FIELD lastName ON TABLE user TYPE string\n  ASSERT $value != NULL AND $value != NONE AND string::len($value) > 0 AND is::alpha($value);\nDEFINE FIELD passwd ON TABLE user TYPE string\n  ASSERT $value != NULL AND $value != NONE AND string::len($value) > 0;\nDEFINE FIELD avatar ON TABLE user TYPE string\n  VALUE $value OR NULL\n  ASSERT (is::url($value) OR $value == NULL);\nDEFINE FIELD owns ON TABLE user TYPE array\n  VALUE $value OR []\n  ASSERT array::distinct($value) == $value OR $value == NULL;\nDEFINE FIELD owns.* ON TABLE user TYPE record(warehouse);\n\nDEFINE INDEX userEmailIndex ON TABLE user COLUMNS email UNIQUE;\n\nDEFINE FIELD name ON TABLE warehouse TYPE string\n  ASSERT $value != NULL AND $value != NONE AND string::len($value) > 0;\nDEFINE FIELD desc ON TABLE warehouse TYPE string\n  ASSERT $value != NULL AND $value != NONE AND string::len($value) > 0;\nDEFINE FIELD logo ON TABLE warehouse TYPE string\n  VALUE $value OR NULL\n  ASSERT (is::url($value) OR $value == NULL);\nDEFINE FIELD owner ON TABLE warehouse TYPE record(user)\n  ASSERT $value != NULL AND $value != NONE;\nDEFINE FIELD isPhysical ON TABLE warehouse TYPE bool\n  VALUE $value OR false;\nDEFINE FIELD capacity ON TABLE warehouse TYPE int\n  VALUE $value OR 0;\n\nDEFINE INDEX name_owner_pairs ON TABLE warehouse COLUMNS name,owner UNIQUE;\n\nDEFINE FIELD title ON TABLE categories TYPE object\n  ASSERT $value != NULL AND $value != NONE;\nDEFINE FIELD title.pl ON TABLE categories type string\n  ASSERT $value != NULL AND $value != NONE;\nDEFINE FIELD title.en ON TABLE categories type string\n  ASSERT $value != NULL AND $value != NONE;\nDEFINE FIELD description ON TABLE categories TYPE object\n  ASSERT $value != NULL AND $value != NONE;\nDEFINE FIELD description.pl ON TABLE categories type string\n  ASSERT $value != NULL AND $value != NONE;\nDEFINE FIELD description.en ON TABLE categories type string\n  ASSERT $value != NULL AND $value != NONE;\nDEFINE FIELD properties ON TABLE categories type array\n  ASSERT $value != NULL AND $value != NONE;\nDEFINE FIELD properties.* ON TABLE categories type record(fields);\nDEFINE FIELD parents ON TABLE categories type array;\nDEFINE FIELD parents.* ON TABLE categories type record(categories);\n\nDEFINE FIELD in ON TABLE manages TYPE record(user);\nDEFINE FIELD out ON TABLE manages TYPE record(warehouse);\nDEFINE FIELD roles ON TABLE manages TYPE array\n  ASSERT $value != NULL AND $value != NONE AND array::distinct($value) == $value;\nDEFINE FIELD roles.* ON TABLE manages TYPE string;\n\nDEFINE INDEX unique_relationships ON TABLE manages COLUMNS in, out UNIQUE;\n\nDEFINE FIELD data ON TABLE entities type object\n  ASSERT $value != NULL AND $value != NONE;\nDEFINE FIELD meta ON TABLE entities type object\n  ASSERT $value != NULL AND $value != NONE;\nDEFINE FIELD meta.status ON TABLE entities type string;\nDEFINE FIELD meta.release ON TABLE entities type datetime;\nDEFINE FIELD meta.discount ON TABLE entities type number;\nDEFINE FIELD meta.discount_deadline ON TABLE entities type datetime;\n\n\nCOMMIT TRANSACTION;
select * from warehouse;
BEGIN TRANSACTION;\n\nDEFINE TABLE user SCHEMAFULL;\nDEFINE TABLE warehouse SCHEMAFULL;\nDEFINE TABLE manages SCHEMAFULL;\nDEFINE TABLE fields SCHEMALESS;\nDEFINE TABLE entities SCHEMAFULL;\nDEFINE TABLE categories SCHEMAFULL;\n\nDEFINE FIELD email ON TABLE user TYPE string\n  ASSERT $value != NULL AND $value != NONE AND is::email($value);\nDEFINE FIELD firstName ON TABLE user TYPE string\n  ASSERT $value != NULL AND $value != NONE AND string::len($value) > 0 AND is::alpha($value);\nDEFINE FIELD lastName ON TABLE user TYPE string\n  ASSERT $value != NULL AND $value != NONE AND string::len($value) > 0 AND is::alpha($value);\nDEFINE FIELD passwd ON TABLE user TYPE string\n  ASSERT $value != NULL AND $value != NONE AND string::len($value) > 0;\nDEFINE FIELD avatar ON TABLE user TYPE string\n  VALUE $value OR NULL\n  ASSERT (is::url($value) OR $value == NULL);\nDEFINE FIELD owns ON TABLE user TYPE array\n  VALUE $value OR []\n  ASSERT array::distinct($value) == $value OR $value == NULL;\nDEFINE FIELD owns.* ON TABLE user TYPE record(warehouse);\n\nDEFINE INDEX userEmailIndex ON TABLE user COLUMNS email UNIQUE;\n\nDEFINE FIELD name ON TABLE warehouse TYPE string\n  ASSERT $value != NULL AND $value != NONE AND string::len($value) > 0;\nDEFINE FIELD desc ON TABLE warehouse TYPE string\n  ASSERT $value != NULL AND $value != NONE AND string::len($value) > 0;\nDEFINE FIELD logo ON TABLE warehouse TYPE string\n  VALUE $value OR NULL\n  ASSERT (is::url($value) OR $value == NULL);\nDEFINE FIELD owner ON TABLE warehouse TYPE record(user)\n  ASSERT $value != NULL AND $value != NONE;\nDEFINE FIELD isPhysical ON TABLE warehouse TYPE bool\n  VALUE $value OR false;\nDEFINE FIELD capacity ON TABLE warehouse TYPE int\n  VALUE $value OR 0;\n\nDEFINE INDEX name_owner_pairs ON TABLE warehouse COLUMNS name,owner UNIQUE;\n\nDEFINE FIELD title ON TABLE categories TYPE object\n  ASSERT $value != NULL AND $value != NONE;\nDEFINE FIELD title.pl ON TABLE categories type string\n  ASSERT $value != NULL AND $value != NONE;\nDEFINE FIELD title.en ON TABLE categories type string\n  ASSERT $value != NULL AND $value != NONE;\nDEFINE FIELD description ON TABLE categories TYPE object\n  ASSERT $value != NULL AND $value != NONE;\nDEFINE FIELD description.pl ON TABLE categories type string\n  ASSERT $value != NULL AND $value != NONE;\nDEFINE FIELD description.en ON TABLE categories type string\n  ASSERT $value != NULL AND $value != NONE;\nDEFINE FIELD properties ON TABLE categories type array\n  ASSERT $value != NULL AND $value != NONE;\nDEFINE FIELD properties.* ON TABLE categories type record(fields);\nDEFINE FIELD parents ON TABLE categories type array;\nDEFINE FIELD parents.* ON TABLE categories type record(categories);\n\nDEFINE FIELD in ON TABLE manages TYPE record(user);\nDEFINE FIELD out ON TABLE manages TYPE record(warehouse);\nDEFINE FIELD roles ON TABLE manages TYPE array\n  ASSERT $value != NULL AND $value != NONE AND array::distinct($value) == $value;\nDEFINE FIELD roles.* ON TABLE manages TYPE string;\n\nDEFINE INDEX unique_relationships ON TABLE manages COLUMNS in, out UNIQUE;\n\nDEFINE FIELD data ON TABLE entities type object\n  ASSERT $value != NULL AND $value != NONE;\nDEFINE FIELD meta ON TABLE entities type object\n  ASSERT $value != NULL AND $value != NONE;\nDEFINE FIELD meta.status ON TABLE entities type string;\nDEFINE FIELD meta.release ON TABLE entities type datetime;\nDEFINE FIELD meta.discount ON TABLE entities type number;\nDEFINE FIELD meta.discount_deadline ON TABLE entities type datetime;\n\n\nCOMMIT TRANSACTION;
[200~BEGIN TRANSACTION;
ecord(warehouse);
ERT $value != NULL AND $value != NONE;
 TABLE entities type object
BEGIN TRANSACTION;\n\nDEFINE TABLE user SCHEMAFULL;\nDEFINE TABLE warehouse SCHEMAFULL;\nDEFINE TABLE manages SCHEMAFULL;\nDEFINE TABLE fields SCHEMALESS;\nDEFINE TABLE entities SCHEMAFULL;\nDEFINE TABLE categories SCHEMAFULL;\n\nDEFINE FIELD email ON TABLE user TYPE string\n  ASSERT $value != NULL AND $value != NONE AND is::email($value);\nDEFINE FIELD firstName ON TABLE user TYPE string\n  ASSERT $value != NULL AND $value != NONE AND string::len($value) > 0 AND is::alpha($value);\nDEFINE FIELD lastName ON TABLE user TYPE string\n  ASSERT $value != NULL AND $value != NONE AND string::len($value) > 0 AND is::alpha($value);\nDEFINE FIELD passwd ON TABLE user TYPE string\n  ASSERT $value != NULL AND $value != NONE AND string::len($value) > 0;\nDEFINE FIELD avatar ON TABLE user TYPE string\n  VALUE $value OR NULL\n  ASSERT (is::url($value) OR $value == NULL);\nDEFINE FIELD owns ON TABLE user TYPE array\n  VALUE $value OR []\n  ASSERT array::distinct($value) == $value OR $value == NULL;\nDEFINE FIELD owns.* ON TABLE user TYPE record(warehouse);\n\nDEFINE INDEX userEmailIndex ON TABLE user COLUMNS email UNIQUE;\n\nDEFINE FIELD name ON TABLE warehouse TYPE string\n  ASSERT $value != NULL AND $value != NONE AND string::len($value) > 0;\nDEFINE FIELD desc ON TABLE warehouse TYPE string\n  ASSERT $value != NULL AND $value != NONE AND string::len($value) > 0;\nDEFINE FIELD logo ON TABLE warehouse TYPE string\n  VALUE $value OR NULL\n  ASSERT (is::url($value) OR $value == NULL);\nDEFINE FIELD owner ON TABLE warehouse TYPE record(user)\n  ASSERT $value != NULL AND $value != NONE;\nDEFINE FIELD isPhysical ON TABLE warehouse TYPE bool\n  VALUE $value OR false;\nDEFINE FIELD capacity ON TABLE warehouse TYPE int\n  VALUE $value OR 0;\n\nDEFINE INDEX name_owner_pairs ON TABLE warehouse COLUMNS name,owner UNIQUE;\n\nDEFINE FIELD title ON TABLE categories TYPE object\n  ASSERT $value != NULL AND $value != NONE;\nDEFINE FIELD title.pl ON TABLE categories type string\n  ASSERT $value != NULL AND $value != NONE;\nDEFINE FIELD title.en ON TABLE categories type string\n  ASSERT $value != NULL AND $value != NONE;\nDEFINE FIELD description ON TABLE categories TYPE object\n  ASSERT $value != NULL AND $value != NONE;\nDEFINE FIELD description.pl ON TABLE categories type string\n  ASSERT $value != NULL AND $value != NONE;\nDEFINE FIELD description.en ON TABLE categories type string\n  ASSERT $value != NULL AND $value != NONE;\nDEFINE FIELD properties ON TABLE categories type array\n  ASSERT $value != NULL AND $value != NONE;\nDEFINE FIELD properties.* ON TABLE categories type record(fields);\nDEFINE FIELD parents ON TABLE categories type array;\nDEFINE FIELD parents.* ON TABLE categories type record(categories);\n\nDEFINE FIELD in ON TABLE manages TYPE record(user);\nDEFINE FIELD out ON TABLE manages TYPE record(warehouse);\nDEFINE FIELD roles ON TABLE manages TYPE array\n  ASSERT $value != NULL AND $value != NONE AND array::distinct($value) == $value;\nDEFINE FIELD roles.* ON TABLE manages TYPE string;\n\nDEFINE INDEX unique_relationships ON TABLE manages COLUMNS in, out UNIQUE;\n\nDEFINE FIELD data ON TABLE entities type object\n  ASSERT $value != NULL AND $value != NONE;\nDEFINE FIELD meta ON TABLE entities type object\n  ASSERT $value != NULL AND $value != NONE;\nDEFINE FIELD meta.status ON TABLE entities type string;\nDEFINE FIELD meta.release ON TABLE entities type datetime;\nDEFINE FIELD meta.discount ON TABLE entities type number;\nDEFINE FIELD meta.discount_deadline ON TABLE entities type datetime;\n\n\nCOMMIT TRANSACTION;
SELECT * FROM warehouse:‚ü®0189b200-d314-73bd-925c-18d5223b08f5‚ü©;
SELECT capacity, desc, name, logo, isPhysical, owner FROM warehouse:‚ü®0189b200-d314-73bd-925c-18d5223b08f5‚ü©;
BEGIN TRANSACTION;\n\nDEFINE TABLE user SCHEMAFULL;\nDEFINE TABLE warehouse SCHEMAFULL;\nDEFINE TABLE manages SCHEMAFULL;\nDEFINE TABLE fields SCHEMALESS;\nDEFINE TABLE entities SCHEMAFULL;\nDEFINE TABLE categories SCHEMAFULL;\n\nDEFINE FIELD email ON TABLE user TYPE string\n  ASSERT $value != NULL AND $value != NONE AND is::email($value);\nDEFINE FIELD firstName ON TABLE user TYPE string\n  ASSERT $value != NULL AND $value != NONE AND string::len($value) > 0 AND is::alpha($value);\nDEFINE FIELD lastName ON TABLE user TYPE string\n  ASSERT $value != NULL AND $value != NONE AND string::len($value) > 0 AND is::alpha($value);\nDEFINE FIELD passwd ON TABLE user TYPE string\n  ASSERT $value != NULL AND $value != NONE AND string::len($value) > 0;\nDEFINE FIELD avatar ON TABLE user TYPE string\n  VALUE $value OR NULL\n  ASSERT (is::url($value) OR $value == NULL);\nDEFINE FIELD owns ON TABLE user TYPE array\n  VALUE $value OR []\n  ASSERT array::distinct($value) == $value OR $value == NULL;\nDEFINE FIELD owns.* ON TABLE user TYPE record(warehouse);\n\nDEFINE INDEX userEmailIndex ON TABLE user COLUMNS email UNIQUE;\n\nDEFINE FIELD name ON TABLE warehouse TYPE string\n  ASSERT $value != NULL AND $value != NONE AND string::len($value) > 0;\nDEFINE FIELD desc ON TABLE warehouse TYPE string\n  ASSERT $value != NULL AND $value != NONE AND string::len($value) > 0;\nDEFINE FIELD logo ON TABLE warehouse TYPE string\n  VALUE $value OR NULL\n  ASSERT (is::url($value) OR $value == NULL);\nDEFINE FIELD owner ON TABLE warehouse TYPE record(user)\n  ASSERT $value != NULL AND $value != NONE;\nDEFINE FIELD isPhysical ON TABLE warehouse TYPE bool\n  VALUE $value OR false;\nDEFINE FIELD capacity ON TABLE warehouse TYPE int\n  VALUE $value OR 0;\n\nDEFINE INDEX name_owner_pairs ON TABLE warehouse COLUMNS name,owner UNIQUE;\n\nDEFINE FIELD title ON TABLE categories TYPE object\n  ASSERT $value != NULL AND $value != NONE;\nDEFINE FIELD title.pl ON TABLE categories type string\n  ASSERT $value != NULL AND $value != NONE;\nDEFINE FIELD title.en ON TABLE categories type string\n  ASSERT $value != NULL AND $value != NONE;\nDEFINE FIELD description ON TABLE categories TYPE object\n  ASSERT $value != NULL AND $value != NONE;\nDEFINE FIELD description.pl ON TABLE categories type string\n  ASSERT $value != NULL AND $value != NONE;\nDEFINE FIELD description.en ON TABLE categories type string\n  ASSERT $value != NULL AND $value != NONE;\nDEFINE FIELD properties ON TABLE categories type array\n  ASSERT $value != NULL AND $value != NONE;\nDEFINE FIELD properties.* ON TABLE categories type record(fields);\nDEFINE FIELD parents ON TABLE categories type array;\nDEFINE FIELD parents.* ON TABLE categories type record(categories);\n\nDEFINE FIELD in ON TABLE manages TYPE record(user);\nDEFINE FIELD out ON TABLE manages TYPE record(warehouse);\nDEFINE FIELD roles ON TABLE manages TYPE array\n  ASSERT $value != NULL AND $value != NONE AND array::distinct($value) == $value;\nDEFINE FIELD roles.* ON TABLE manages TYPE string;\n\nDEFINE INDEX unique_relationships ON TABLE manages COLUMNS in, out UNIQUE;\n\nDEFINE FIELD data ON TABLE entities type object\n  ASSERT $value != NULL AND $value != NONE;\nDEFINE FIELD meta ON TABLE entities type object\n  ASSERT $value != NULL AND $value != NONE;\nDEFINE FIELD meta.status ON TABLE entities type string;\nDEFINE FIELD meta.release ON TABLE entities type datetime;\nDEFINE FIELD meta.discount ON TABLE entities type number;\nDEFINE FIELD meta.discount_deadline ON TABLE entities type datetime;\n\n\nCOMMIT TRANSACTION;
SELECT * FROM users;
SELECT * FROM user;
INFO FOR DB;
SELECT ->out FROM users;
SELECT * FROM manages;
SELECT * FROM manages WHERE out=warehouse:‚ü®0189dbfb-5611-7f93-9435-2bb6455d3c80‚ü©;
SELECT * FROM WAREHOUSE;
INFO FOR DB;
SELECT * FROM warehouse;
SELECT * FROM manages;
SELECT * FROM user;
SELECT * FROM warehouse;
